import React, { useRef, useEffect } from 'react';

import './LoadingScreen.css';

const LoadingScreen = () => {
  const ref = useRef(null);

  useEffect(() => {
    let elements = Array.from(ref.current.childNodes[0].childNodes);
    elements = elements.sort((ele1, ele2) => {
      const string1 =
        Object.values(ele2)[1].d || 'M' + Object.values(ele2)[1].points;
      const string2 =
        Object.values(ele1)[1].d || 'M' + Object.values(ele1)[1].points;

      if (string1 && string2) {
        if (string1.split(',')[0] > string2.split(',')) {
          return -1;
        } else if (string1.split(',')[0] < string2.split(',')) {
          return 1;
        } else {
          return 0;
        }
      }
    });

    let i = 0;
    const interval = setInterval(() => {
      if (i === elements.length) {
        elements.forEach(path => path.setAttribute('style', 'fill-opacity:0'));
        i = 0;
      } else {
        elements[i].setAttribute('style', 'fill-opacity:1');
        i++;
      }
    }, 50);

    return () => clearInterval(interval);
  }, []);

  return (
    <div id="loading-screen">
      <svg
        version="1.1"
        id="loading-svg"
        xmlns="http://www.w3.org/2000/svg"
        xmlnsXlink="http://www.w3.org/1999/xlink"
        x="0px"
        y="0px"
        viewBox="0 0 1024 768"
        style={{ 'enable-background': 'new 0 0 1024 768;' }}
        xmlSpace="preserve"
        ref={ref}
      >
        <g>
          <path d="M613.55,512.43c2.28,0,4.56-0.13,6.82-0.38V302.42c-2.11-1.02-4.42-1.73-6.82-2.12V512.43z" />
          <path d="M545.4,436.39c0.45,0.61,0.87,1.25,1.18,1.96l5.63,12.68V322.31l-1.46-4.3c-0.93-2.74-2.89-4.8-5.35-6.17V436.39z" />
          <path
            d="M674.89,349.05c-0.36,0.42-0.71,0.85-1.03,1.31l-2.62,3.76c-0.83,1.2-1.93,2.14-3.17,2.85v112.02l1.55-2.97
		c1.3-2.51,3.11-4.62,5.27-6.36V349.05z"
          />
          <path d="M681.71,455.82c2.17-0.81,4.47-1.37,6.82-1.66V342.48c-2.36,0.23-4.67,0.8-6.82,1.7V455.82z" />
          <path d="M654.44,494.13c1.19-1.6,2.29-3.3,3.23-5.12l3.59-6.9V358.58c-2.47-0.07-4.89-0.77-6.82-2.08V494.13z" />
          <path d="M647.63,345.96l-6.82-12.8v172.62c2.42-1.32,4.7-2.84,6.82-4.56V345.96z" />
          <path d="M511.32,344.1c-1.92,1.53-4.3,2.49-6.82,2.89v120.86c3.01-1.18,5.54-3.28,6.81-6.32l0.01-0.02V344.1z" />
          <path
            d="M524.95,315.5c-0.4,0.59-0.76,1.23-1.04,1.91l-5.77,13.8v114l3.05-7.3c0.2-0.49,0.44-0.97,0.76-1.41
		c0.82-1.13,1.85-2.06,3-2.83V315.5z"
          />
          <path d="M572.66,494.52c1.98,2.59,4.27,4.9,6.82,6.93V325.96l-1.17,1.8c-1.13,2.52-3.19,4.31-5.65,5.42V494.52z" />
          <path d="M606.74,300.04c-2.35,0.2-4.66,0.7-6.82,1.5v209.4c2.24,0.5,4.51,0.88,6.82,1.13V300.04z" />
          <path d="M593.11,305.64c-1.65,1.52-3.02,3.32-3.97,5.45l-2.85,4.38v190.48c2.17,1.16,4.46,2.16,6.82,3.01V305.64z" />
          <path d="M627.18,307.87V510.9c2.33-0.54,4.6-1.21,6.82-2.03V320.35l-4.73-8.88C628.73,310.16,628.02,308.96,627.18,307.87z" />
          <path d="M743.04,380.71c-2.3-0.44-4.6-0.96-6.82-1.59v92.35c2.56-0.79,4.92-2.08,6.82-3.9V380.71z" />
          <polygon points="824.83,392.77 824.83,389.2 818.01,389.21 818.01,393.82 	" />
          <path d="M722.6,372.13v98.96c2.14,0.81,4.47,1.25,6.82,1.31v-95.69C726.56,375.43,724.17,373.91,722.6,372.13z" />
          <path d="M695.34,454.04c2.33,0.21,4.63,0.67,6.82,1.4V345.07c-2.08-1.13-4.4-1.91-6.82-2.33V454.04z" />
          <polygon points="848,389.21 845.27,389.19 845.27,389.63 	" />
          <path d="M749.86,455.96l6.82-12.82v-60.75c-2.02-0.11-4.35-0.31-6.82-0.62V455.96z" />
          <polygon points="831.64,391.72 838.46,390.68 838.46,389.19 831.64,389.19 	" />
          <path d="M811.2,388.45l-6.82-0.76v8.53c2.27-0.5,4.55-0.93,6.82-1.32V388.45z" />
          <path
            d="M715.78,466.37V361.99l-6.49-9.68c-0.1-0.21-0.21-0.4-0.32-0.6v107.13c2.26,1.61,4.22,3.62,5.71,6.03v0
		C715.01,465.4,715.39,465.9,715.78,466.37z"
          />
          <polygon points="770.3,383.91 763.49,383.15 763.49,430.32 770.3,417.51 	" />
          <path d="M777.12,408.05c2.03-1.76,4.32-3.32,6.82-4.69v-17.94l-6.82-0.76V408.05z" />
          <path d="M797.57,386.94l-6.82-0.76v14.04c2.2-0.85,4.48-1.61,6.82-2.28V386.94z" />
          <path d="M443.17,480.61V247.57c-2.1-1.37-4.39-2.48-6.82-3.34v241.73C439.03,484.69,441.38,482.91,443.17,480.61z" />
          <polygon points="211.45,385.89 204.63,387.36 204.63,390.96 211.45,391.24 	" />
          <path d="M300.05,303.91v98.19c2.37,1.07,4.65,2.21,6.82,3.46V302.94C304.54,302.8,302.19,303.12,300.05,303.91z" />
          <path d="M347.75,436.03V323.82c-2.24,0.34-4.54,0.44-6.82,0.3V436C343.19,436.32,345.5,436.34,347.75,436.03z" />
          <path d="M327.31,428.08c1.66,2.54,4.04,4.5,6.82,5.86V322.94c-2.43-0.71-4.73-1.73-6.82-3.06V428.08z" />
          <path d="M238.71,378.55c-2.2,0.93-4.49,1.77-6.82,2.53v10.99l6.82,0.28V378.55z" />
          <path d="M320.49,416.75V313.02l-2.56-4.14c-1.04-1.69-2.53-3-4.26-3.98v105.24C316.22,412.14,318.5,414.33,320.49,416.75z" />
          <polygon points="191,390.57 195.09,390.57 197.82,390.68 197.82,388.82 191,390.28 	" />
          <path d="M259.15,393.19l2.73,0.11c1.37,0.07,2.74,0.17,4.09,0.28v-42.19l-6.82,10.46V393.19z" />
          <path d="M293.23,309.56l-6.82,10.46v77.15c2.28,0.64,4.55,1.38,6.82,2.2V309.56z" />
          <path d="M252.34,370.36c-2.01,1.76-4.31,3.36-6.82,4.81v17.46l6.82,0.28V370.36z" />
          <path d="M279.6,330.48l-6.82,10.46v53.42c2.29,0.32,4.56,0.71,6.82,1.17V330.48z" />
          <path d="M218.26,391.52l6.82,0.28v-8.76c-2.28,0.57-4.57,1.08-6.82,1.51V391.52z" />
          <path d="M490.88,467.38c2.06,1,4.43,1.54,6.82,1.61V346.73c-2.64-0.63-5.05-1.9-6.82-3.77V467.38z" />
          <path d="M484.06,329.15l-6.82-15.34v131.8c1.93,1.22,3.45,2.95,4.21,5.19l2.6,7.63V329.15z" />
          <path d="M449.98,466.59l6.82-15.18V267.78l-4.14-9.33c-0.73-1.64-1.64-3.14-2.67-4.53V466.59z" />
          <path d="M361.38,317.83c-1.99,1.73-4.3,3.11-6.82,4.14v112.07c2.7-1.31,5.06-3.19,6.79-5.68l0.02-0.03V317.83z" />
          <path d="M559.03,466.38l6.82,15.34V334.5c-2.4-0.05-4.78-0.62-6.82-1.68V466.38z" />
          <path d="M531.77,431.28c2.29-0.25,4.64-0.07,6.82,0.56V309.87c-2.31-0.17-4.66,0.09-6.82,0.79V431.28z" />
          <path d="M463.61,444.46c2.12-0.82,4.49-1.15,6.82-0.98V298.46l-6.82-15.34V444.46z" />
          <path d="M388.65,268.46l-6.82,13.12v140.65c0.98,0.85,1.79,1.88,2.3,3.11l4.52,10.92V268.46z" />
          <path d="M395.46,452.72l6.82,16.46V248.34c-2.69,1.95-5.02,4.34-6.82,7.19V452.72z" />
          <path d="M409.09,482.24c1.9,1.88,4.24,3.33,6.82,4.34v-243.9c-2.35,0.44-4.64,1.08-6.82,1.94V482.24z" />
          <path d="M429.54,488.01V242.5c-2.24-0.35-4.53-0.52-6.82-0.49v246.17C424.99,488.41,427.29,488.35,429.54,488.01z" />
          <path d="M368.2,420.77c2.06-1.02,4.47-1.43,6.82-1.24V294.7l-6.82,13.12V420.77z" />
        </g>
      </svg>
    </div>
  );
};

export default LoadingScreen;
